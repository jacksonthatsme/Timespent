function togglePlayState(){1==videoEl.paused?(videoEl.play(),setPlayState("play")):(videoEl.pause(),setPlayState("pause"))}function setVideoDuration(){var e=setInterval(function(){if(videoEl.readyState>0){var t=timeFormatted(videoEl.duration);videoStateCounterTotal.text(t),clearInterval(e)}},200)}function setPlayState(e){"pause"==e?$(".js-media-player__play-state").removeClass("media-player__play-state--play").addClass("media-player__play-state--pause"):"play"==e&&$(".js-media-player__play-state").removeClass("media-player__play-state--pause").addClass("media-player__play-state--play")}function setVolumeState(e){volumeIndicator.removeClass("volume-indicator--3 volume-indicator--2 volume-indicator--1 volume-indicator--0").addClass("volume-indicator--"+e)}function setMarqueeTitle(e){var t=e.data("marquee-title");marqueeTitle.text(t)}function timeFormatted(e){var t=Math.floor(e/60),a=Math.floor(e%60);return a.toString().length<2&&(a="0"+a),t+":"+a}function buildSource(e){return[e.data("mp4-src"),e.data("webm-src")]}function injectSource(e){playerSrcMp4.attr("src",e[0]),playerSrcWebm.attr("src",e[1])}function changeVideo(e){injectSource(buildSource(e)),setCurrentVideo(e),getStatus(),setCurrentVideoActive(),setPlayState("play"),videoEl.load(),videoEl.play(),setVideoDuration(),setMarqueeTitle(e),removePlaceholder()}function removePlaceholder(){mediaPlayerVideoPlaceholder.removeClass("visible")}function setCurrentVideoActive(){$(".video-item--active").find('[data-js="video-item__cta"]').text("played"),$(".video-item--active").removeClass("video-item--active"),currentVideo.addClass("video-item--active"),currentVideo.find('[data-js="video-item__cta"]').text("playing")}function setCurrentVideo(e){currentVideo=videoItems.filter(e),currentVideoId=videoItems.index(e)}function getNext(){if(currentVideoId>=videoItems.length)e=videoItems.first();else var e=videoItems.eq(currentVideoId+1);return e}function getPrev(){if(currentVideoId<=0)e=videoItems.last();else var e=videoItems.eq(currentVideoId-1);return e}function getStatus(){nextVideo=getNext(currentVideo),prevVideo=getPrev(currentVideo)}var mediaPlayer=$('[data-js="media-player"]'),mediaPlayerState="closed",minimizePlayerBtn=$(".js-media-player__actions__item--minimize"),expandPlayerBtn=$(".js-media-player__actions__item--expand"),closePlayerBtn=$(".js-media-player__action__item--close"),volumeIndicator=$('[data-js~="volume-indicator"]'),muteVideoBtn=$('[data-js~="mute-video"]'),preMuteValue,playVideoBtn=$('[data-js="play-video"]'),videoEl=$("#js-video-player__video")[0],playerSrcMp4=$("#js-video-player__source--mp4"),playerSrcWebm=$("#js-video-player__video__source--webm"),videoStateCounterTotal=$('[data-js="video-state--counter__total"]'),videoStateCounterProgress=$('[data-js="video-state--counter__progress"]'),marqueeTitle=$('[data-js="media-player__marquee__title"]'),mediaPlayerVideoPlaceholder=$('[data-js="media-player__video__placeholder"]'),currentVideo,nextVideo,prevVideo,currentVideoId,videoItems=$('[data-js="video-item"]'),firstVideo=videoItems.eq(0);$("document").ready(function(){$(".js-media-player__slider").slider({min:0,max:1,value:1,step:.1,slide:function(e,t){videoEl.volume=t.value,setVolumeState(t.value>=.8?"3":t.value<=.8&&t.value>=.4?"2":t.value<=.4&&t.value>=.1?"1":"0")},change:function(e,t){videoEl.volume=t.value,setVolumeState(t.value>=.8?"3":t.value<=.8&&t.value>=.4?"2":t.value<=.4&&t.value>=.1?"1":"0")}})}),muteVideoBtn.on("click",function(){videoEl.volume>=.1?(preMuteValue=videoEl.volume,videoEl.volume=0,$(".js-media-player__slider").slider("value",0)):videoEl.volume<=.1&&(videoEl.volume=preMuteValue,$(".js-media-player__slider").slider("value",preMuteValue))}),playVideoBtn.on("click",function(){void 0===currentVideo?changeVideo(firstVideo):togglePlayState()}),videoItems.on("click",function(){changeVideo($(this)),$("html, body").animate({scrollTop:0},300)}),$(".js-next-video").on("click",function(){changeVideo(nextVideo)}),$(".js-prev-video").on("click",function(){changeVideo(prevVideo)}),videoEl.addEventListener("timeupdate",function(){var e=timeFormatted(videoEl.currentTime);videoStateCounterProgress.text(e)}),videoEl.onended=function(e){changeVideo(nextVideo),setPlayState("play")},$(window).keypress(function(e){32===e.which&&e.target==document.body&&(e.preventDefault(),togglePlayState())});